# Masters Extractor Tool

This app was created to analyze and compare extraction results for my Masters thesis. The tool uses PHP as main language and run some commands using the command line.

## Metadata Extraction

This tool compares a set of PDF academic papers and extracts metadata information using 4 tools. The results are compared and a general index is calculate to give each tool a grade. The follow tools were compared:

- Cermine: https://github.com/CeON/CERMINE
- CiteSeer: https://github.com/SeerLabs/new-csx-extractor
- CrossRef: https://github.com/CrossRef/pdfextract
- ParsCit: https://github.com/knmnyn/ParsCit

### Directory Structure

Inside `bin` directory you have some useful commands to facilitate and generate comparison results. These commands must be run at the terminal and you must have PHP 5.4+ installed in your machine.

All PDF papers must be inside `papers` directory. This directory has subdirectories separated by area, like Computer Science, so, inside `papers/computer-science` you have a set of PDF papers to be extracted. You can have as many areas you want. Here you have papers from 16 areas used in my Masters. Inside each dir you have a `__collection.json` file with the metadata manually extracted, for each PDF file inside the current dir. Each `__collection.json` file has information from 7 files.

The `src` directory is used for some PHP codes, like comparison and extraction from tools XML outputs. Each tool has your own XML format and it must return the results in a default format. Here have basically the comparison strategies used and the returned metadata from each tool.

Inside `tools` directory you can find the source of the tools that are being used. You have for each tool a folder with the source content. 

- For Cermine you have a single `.jar` file so, you must have at least JRE installed. 
- For CiteSeer you have all code you need to extract, with all dependencies the tools needs, but you must install everything it needs (you can get it on the tools link) including starting a http server. 
- For CrossRef you have a Ruby project, which you have to compile and install by hand, with `gem build` and `gem install` commands. 
- ParsCit needs some Perl modules, so follow the instructions to install it. 

For each tool you have a `.sh` file, that is the default way to run each tool, to get the results in the same format.

For `vendor` directory you have only the Composer (from PHP) (http://getcomposer.org) autoload files, nothing more.

All the results extractions for each tool are stored inside `outputs` directory in XML format. For each area you have a subdir and for each tool you have another subdir, like `outputs/computer-science/cermine/computer-science-557b476d5bea4.xml`. Inside `outputs` you have to some JSON files, that are the outputs of `./bin/comparator` and `./bin/calculator` commands.



### Commands

Here you have some commands to facilitate and generate comparison results and other useful stuffs.

- `./bin/calculator`: Calculates all results for each tool after the extractions XML outputs being stored using `./bin/extractor` command. This will generate the `outputs/__final.json` file with all results the tools give you, using for that each `__results-average.json` (check the `./bin/comparator` command for details).

- `./bin/clean-xml-files`: Because some PDF papers had to be replaced during the development process some XML files generated by the tools need to be removed, so this command remove these XML files that don't have a correspondent PDF file.

- `./bin/comparator`: Compares the extractions results in XML with the manually extracted information (`__collection.json` file inside each `papers` directory). This command generates 2 output files for each area and each tool: `__results-average.json` and `__results-individual.json`. The average file has the average of extraction results from all PDF papers by area. The individual file has each extraction result for each PDF paper.

- `./bin/comparator-all`: This command is a wrapper to execute `comparator` command for all areas and all tools, nothing more.

- `./bin/extractor`: It extracts metadata from a tool (like `-t cermine`) and a directory (like `-d papers`). So this will extract the metadata from all PDF papers inside `-d` directory for the `-t` tool. Example: `./bin/extractor -t cermine -d papers/`. All results will be saved inside `outputs` dir in XML format, following the same PDF file name. It can be used to extract a single PDf file, using `./bin/extractor -t cermine -f path/to/pdf/file.pdf`.

- `./bin/extractor-all`: Run the `extractor` command for all tools assuming the `papers` directory.

- `./bin/fix/citeseer-xml`: Fix XML output files for CiteSeer without a main XML tag. This command will check these files inside `outputs` dir and, if necessary, include a root tag called `paper` to make the XML readable.

- `./bin/generate-filename`: Just generate a general filename with the base directory like `./bin/generate-filename -d papers/computer-science`. This will print a random filename in PDF format. Used just in case of PDF replacements.

- `./bin/missing-extractions`: List all PDF files that does not have a XML file with output result. Useful for PDF papers that were replaced and you have to extract the results for a single file. The output is printed on the terminal.

- `./bin/rename`: This command generate a random filename for each PDF file you have inside a directory. It uses a parent directory to generate this random filename. This renamed file will have the follow syntax: `subdirectory-557b476d5bea4.pdf`, with the directory structure `some/directory/subdirectory`.

### Quick example

With all PDF papers files inside `papers` dir and ALL tools installed inside your server just run `./bin/extractor-all`. This will generate all XML files for each tool and can spend about 1 hours to extract all 112 PDF files using the 4 tools.

After that, with all XML files saved inside `outputs` just run `./bin/calculator`. This command will run `./bin/comparator-all` command for all tools and areas and after calculate some averages. The final results will be stored in `outputs/__final.json`.



## License

This tool is very customized for my Masters thesis' purposes, but if you want to use part of it or even everything please be free to do that. The code is free and licensed under the [DBAD license](http://www.dbad-license.org/).

Let me know if you need help with the code. Thanks.




